generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model admins {
  id           String       @id @default(dbgenerated("(uuid())")) @db.Char(36)
  name         String       @db.VarChar(255)
  username     String       @unique(map: "username") @db.VarChar(255)
  email        String       @unique(map: "email") @db.VarChar(255)
  password     String       @db.VarChar(255)
  role         String       @db.Char(36)
  created_at   DateTime     @default(now()) @db.DateTime(0)
  updated_at   DateTime     @default(now()) @db.DateTime(0)
  deleted_at   DateTime?    @db.DateTime(0)
  master_roles master_roles @relation(fields: [role], references: [id], onUpdate: Restrict, map: "admins_ibfk_1")

  @@index([role], map: "role")
}

model batch_registration {
  id                 String               @id @unique(map: "id") @default(dbgenerated("(uuid())")) @db.Char(36)
  batch_name         Int?                 @db.Int
  quota              Int              
  end_date           DateTime?            @db.DateTime(0)
  created_at         DateTime?            @default(now()) @db.DateTime(0)
  updated_at         DateTime?            @default(now()) @db.DateTime(0)
  deleted_at         DateTime?            @db.DateTime(0)
  interview_schedule interview_schedule[]
  payments           payments[]
  students           students[]
}

model cbt_answers {
  question_id     String        @db.Char(36)
  student_id      String        @db.Char(36)
  selected_option String?       @db.Text
  created_at      DateTime?     @default(now()) @db.DateTime(0)
  updated_at      DateTime?     @default(now()) @db.DateTime(0)
  deleted_at      DateTime?     @db.DateTime(0)
  cbt_questions   cbt_questions @relation(fields: [question_id], references: [id], onUpdate: Restrict, map: "cbt_answers_ibfk_1")
  students        students      @relation(fields: [student_id], references: [id], onUpdate: Restrict, map: "cbt_answers_ibfk_2")

  @@id([question_id, student_id])
  @@index([question_id], map: "question_id")
  @@index([student_id], map: "student_id")
}

model cbt_enrolled {
  id         String    @id @default(dbgenerated("(uuid())")) @db.Char(36)
  student_id String?   @db.Char(36)
  exam_id    String?   @db.Char(36)
  token      String?   @db.VarChar(255)
  time_start DateTime? @db.DateTime(0)
  time_end   DateTime? @db.DateTime(0)
  created_at DateTime? @default(now()) @db.DateTime(0)
  updated_at DateTime? @default(now()) @db.DateTime(0)
  deleted_at DateTime? @db.DateTime(0)

  @@index([exam_id], map: "fk_cbt_examination")
  @@index([student_id], map: "fk_student")
}

model cbt_examination {
  id            String          @id @default(dbgenerated("(uuid())")) @db.Char(36)
  name          String?         @db.VarChar(255)
  minimal_value Int             
  leases_time   String?         @db.VarChar(255)
  created_at    DateTime?       @default(now()) @db.DateTime(0)
  updated_at    DateTime?       @default(now()) @db.DateTime(0)
  deleted_at    DateTime?       @db.DateTime(0)
  cbt_questions cbt_questions[]
  cbt_results   cbt_results[]
}

model cbt_questions {
  id              String              @id @default(dbgenerated("(uuid())")) @db.Char(36)
  exam_id         String?             @db.Char(36)
  type            cbt_questions_type?
  question_text   String?             @db.Text
  option_text     String?             @db.LongText
  answer          String?             @db.Text
  weight          Int                 @default(0)
  created_at      DateTime?           @default(now()) @db.DateTime(0)
  updated_at      DateTime?           @default(now()) @db.DateTime(0)
  deleted_at      DateTime?           @db.DateTime(0)
  cbt_answers     cbt_answers[]
  cbt_examination cbt_examination?    @relation(fields: [exam_id], references: [id], onDelete: Restrict, onUpdate: Restrict, map: "cbt_questions_ibfk_1")

  @@index([exam_id], map: "exam_id")
}

model cbt_results {
  id              String               @id @default(dbgenerated("(uuid())")) @db.Char(36)
  student_id      String?              @db.Char(36)
  exam_id         String?              @db.Char(36)
  total_points    Int?
  checked         cbt_results_checked?
  created_at      DateTime?            @default(now()) @db.DateTime(0)
  updated_at      DateTime?            @default(now()) @db.DateTime(0)
  deleted_at      DateTime?            @db.DateTime(0)
  students        students?            @relation(fields: [student_id], references: [id], onDelete: Restrict, onUpdate: Restrict, map: "cbt_results_ibfk_1")
  cbt_examination cbt_examination?     @relation(fields: [exam_id], references: [id], onDelete: Restrict, onUpdate: Restrict, map: "cbt_results_ibfk_2")

  @@index([exam_id], map: "exam_id")
  @@index([student_id], map: "student_id")
}

model installments {
  id                 String                 @id @default(uuid()) @db.Char(36)
  payment_id         String?                @db.Char(36)
  installment_number Int
  amount             Decimal                @db.Decimal(10, 2)
  discount           installments_discount? @default(no)
  due_date           DateTime?              @db.DateTime(0)
  payment_date       DateTime?              @db.DateTime(0)
  created_at         DateTime               @default(now()) @db.DateTime(0)
  updated_at         DateTime               @default(now()) @db.DateTime(0)
  payments           payments?              @relation(fields: [payment_id], references: [id], onDelete: Restrict, onUpdate: Restrict, map: "fk_payment_id")

  @@index([payment_id], map: "payment_id_index")
}

model interview_schedule {
  id                 String              @id @unique(map: "id") @default(dbgenerated("(uuid())")) @db.Char(36)
  batch_id           String?             @db.Char(36)
  interview_date     DateTime?           @db.DateTime(0)
  interview_location String?             @db.VarChar(255)
  created_at         DateTime?           @default(now()) @db.DateTime(0)
  updated_at         DateTime?           @default(now()) @db.DateTime(0)
  deleted_at         DateTime?           @db.DateTime(0)
  batch_registration batch_registration? @relation(fields: [batch_id], references: [id], onDelete: Restrict, onUpdate: Restrict, map: "interview_schedule_ibfk_1")
  students           students[]

  @@index([batch_id], map: "batch_id")
}

model learning_packages {
  id          String    @id @default(dbgenerated("(uuid())")) @db.Char(36)
  name        String?   @db.VarChar(255)
  description String?   @db.Text
  price       Decimal   @db.Decimal(10, 2)
  created_at  DateTime  @default(now()) @db.DateTime(0)
  updated_at  DateTime  @default(now()) @db.DateTime(0)
  deleted_at  DateTime? @db.DateTime(0)
}

model master_referral {
  id         String     @id @default(dbgenerated("(uuid())")) @db.Char(36)
  name       String?    @db.VarChar(255)
  created_at DateTime?  @default(now()) @db.DateTime(0)
  updated_at DateTime?  @default(now()) @db.DateTime(0)
  deleted_at DateTime?  @db.DateTime(0)
  students   students[]
}

model master_roles {
  id         String   @id @default(dbgenerated("(uuid())")) @db.Char(36)
  name       String   @db.VarChar(255)
  access     String   @db.Text
  created_at DateTime @default(now()) @db.DateTime(0)
  updated_at DateTime @default(now()) @db.DateTime(0)
  admins     admins[]
}

model payments {
  id                 String              @id @default(uuid()) @db.Char(36)
  student_id         String?             @db.Char(36)
  batch_id           String?             @db.Char(36)
  amount             Decimal?            @db.Decimal(10, 2)
  type               payments_type?
  created_at         DateTime?           @db.DateTime(0)
  updated_at         DateTime?           @db.DateTime(0)
  installments       installments[]
  batch_registration batch_registration? @relation(fields: [batch_id], references: [id], onDelete: Restrict, onUpdate: Restrict, map: "batch_fk")
  students           students?           @relation(fields: [student_id], references: [id], onDelete: Restrict, onUpdate: Restrict, map: "student_fk")

  @@index([batch_id], map: "fk_batch_id")
  @@index([student_id], map: "fk_student_id")
}

model sequelizemeta {
  name String @id @unique(map: "name") @default("") @db.VarChar(255)
}

model student_attachments {
  id          String    @id @default(dbgenerated("(uuid())")) @db.Char(36)
  student_id  String?   @db.Char(36)
  file_name   String    @db.VarChar(255)
  file_url    String    @db.VarChar(255)
  uploaded_at DateTime? @default(now()) @db.DateTime(0)
  created_at  DateTime? @default(now()) @db.DateTime(0)
  updated_at  DateTime? @default(now()) @db.DateTime(0)
  deleted_at  DateTime? @db.DateTime(0)
  students    students? @relation(fields: [student_id], references: [id], onDelete: Cascade, map: "fk_student")

  @@index([student_id], map: "fk_student")
}

model student_punishments {
  id              String                               @id @default(dbgenerated("(uuid())")) @db.Char(36)
  student_id      String                               @db.Char(36)
  punishment_type student_punishments_punishment_type?
  description     String?                              @db.Text
  start_date      DateTime?                            @db.DateTime(0)
  end_date        DateTime?                            @db.DateTime(0)
  created_at      DateTime                             @default(now()) @db.DateTime(0)
  updated_at      DateTime                             @default(now()) @db.DateTime(0)
  deleted_at      DateTime?                            @db.DateTime(0)
  students        students                             @relation(fields: [student_id], references: [id], onUpdate: Restrict, map: "student_punishments_ibfk_1")

  @@index([student_id], map: "student_id")
}

model students {
  id                  String                    @id @unique(map: "id") @default(dbgenerated("(uuid())")) @db.Char(36)
  full_name           String                    @db.VarChar(255)
  gender              students_gender?
  whatsapp_number     String?                   @unique(map: "whatsapp_number") @db.VarChar(255)
  email               String?                   @unique(map: "email") @db.VarChar(255)
  nik                 String?                   @unique(map: "nik") @db.VarChar(255)
  province            String?                   @db.VarChar(255)
  city                String?                   @db.VarChar(255)
  subdistrict         String?                   @db.VarChar(255)
  village             String?                   @db.VarChar(255)
  address_detail      String?                   @db.VarChar(255)
  last_education      String?                   @db.VarChar(255)
  work_now            String?                   @db.VarChar(255)
  want_to_work        students_want_to_work?
  batch_id            String?                   @db.Char(36)
  interview_id        String?                   @db.Char(36)
  dormitory           students_dormitory?
  installment         students_installment?
  referral_id         String?                   @db.Char(36)
  referral_source     students_referral_source?
  birthdate           DateTime?                 @db.Date
  guardian_name       String?                   @db.VarChar(255)
  guardian_phone      String?                   @db.VarChar(255)
  progress            students_progress?
  created_at          DateTime?                 @default(now()) @db.DateTime(0)
  updated_at          DateTime?                 @default(now()) @db.DateTime(0)
  deleted_at          DateTime?                 @db.DateTime(0)
  cbt_answers         cbt_answers[]
  cbt_results         cbt_results[]
  payments            payments[]
  student_attachments student_attachments[]
  student_punishments student_punishments[]
  batch_registration  batch_registration?       @relation(fields: [batch_id], references: [id], onDelete: Cascade, map: "fk_batch_registration")
  interview_schedule  interview_schedule?       @relation(fields: [interview_id], references: [id], onDelete: Restrict, onUpdate: Restrict, map: "fk_interview_id")
  master_referral     master_referral?          @relation(fields: [referral_id], references: [id], onDelete: Cascade, map: "fk_refferal")

  @@index([batch_id], map: "fk_batch_registration")
  @@index([interview_id], map: "fk_interview_id")
  @@index([referral_id], map: "fk_refferal")
}

enum cbt_questions_type {
  essay
  multipleChoice
}

enum students_gender {
  male
  female
}

enum student_punishments_punishment_type {
  suspension
  warning
  expulsion
  other
}

enum cbt_results_checked {
  yes
  no
}

enum payments_type {
  pendaftaran
  pendidikan
}

enum students_want_to_work {
  nurse
  food
  other
}

enum installments_discount {
  yes
  no
}

enum students_dormitory {
  yes
  no
}

enum students_installment {
  yes
  no
}

enum students_referral_source {
  instagram
  youtube
  tiktok
  facebook
  website
  friend
  other
}

enum students_progress {
  registering
  psychotest
  assessment
  qualified
  contract
  payment
  success
  blocked
  hold
  blacklist
}
